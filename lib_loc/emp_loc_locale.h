//-----------------------------------------------------------------------------
// rgen.art
//-----------------------------------------------------------------------------
#ifndef EMP_LOC_LOCALE_H
#define EMP_LOC_LOCALE_H

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
#include "emp_loc_string.h"

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
namespace emp { namespace loc {

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
struct string_s;

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
void get_error(c_astring& a_sValue, c_astring& a_sLanguage, u8string& a_rsError);

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
EMP_NOCOPY(class, locale_c)
private:
    astring m_sName;
    EMP_POINTER(u8string) m_psu8NoTranslation;
    vector<emp::loc::string_s> m_vStrings;
    map_t<astring, string_s const*> m_mpStrings; // @@0 map serialization

public:
    locale_c(void);
    ~locale_c(void);

    EMP_RETURN bool post_load(void);
    // @@0 remove void destroy(void);

public:
    EMP_RETURN c_astring& name(void) const { return m_sName; }

    EMP_RETURN c_u8string& get_string(string_s const& a_rString) const;

    EMP_RETURN size_t get_string_sount(void) const;
};

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
} }

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
#endif
